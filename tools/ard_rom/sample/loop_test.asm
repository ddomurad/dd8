; simple program to test the assembly language
.def (
 CNT_ADDR := 0x00 
 CNT_START := 0x9
)
.org 0xf000 
  
  ldai CNT_START
  sta CNT_ADDR
  lda CNT_ADDR

  ldai 0b00001100 ; enable
  sta 0x8000
  ldai 0x80       ; set DDRAM = 0x00
  sta 0x8000 

loop:
  ldai 0x01       ; clear display
  sta 0x8000 

  ldai 0x50 ; P
  sta 0x8001

  ldai 0x61 ; a
  sta 0x8001

  ldai 0x70 ; p
  sta 0x8001

  ldai 0x75 ; u
  sta 0x8001

  ldai 0x70 ; p
  sta 0x8001

  ldai 0x61 ; a
  sta 0x8001

  ldai 0x20 ; \s
  sta 0x8001

  ldai 0x2b ; +
  sta 0x8001

  ldai 0x20 ; \s
  sta 0x8001

  ldai 0x44 ; D
  sta 0x8001

  ldai 0x65 ; e
  sta 0x8001

  ldai 0x64 ; d
  sta 0x8001

  ldai 0x65 ; e
  sta 0x8001


  ldai 0x20 ; \s
  sta 0x8001


  ldai 0x3d ; =
  sta 0x8001

  ldai 0x20 ; \s
  sta 0x8001

  ldai 0x4c ; L
  sta 0x8001

  ldai 0x4f ; O
  sta 0x8001

  ldai 0x56 ; V
  sta 0x8001

  ldai 0x45 ; E
  sta 0x8001



  ldai 0x50 ; P
  sta 0x8001


  ldai 0x2b ; +
  sta 0x8001


  ldai 0x44 ; D
  sta 0x8001


  ldai 0x3d ; =
  sta 0x8001


  ldai 0x57 ; W
  sta 0x8001

  ldai 0x2d ; ,
  sta 0x8001

  ldai 0x53 ; S
  sta 0x8001

  clc
  ldai 0x30 ; ,
  adc CNT_ADDR ; + cnt
  clc
  sta 0x8001

  dec CNT_ADDR ; cnt--
  beq inf_loop
  jmp loop

inf_loop:
  jmp inf_loop

.org 0xfffc
.db 0x00, 0xf0
